<div class="menu-toggle">
    <div class="menu-toggle-button"></div>
    <span></span>
    <span></span>
    <span></span>

    <div class="toc-menu-background"></div>
    <aside class="toc-menu">
        <ol class="toc-menu-list"></ol>
    </aside>
</div>

<script src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.0.3/dist/smooth-scroll.polyfills.min.js"
    integrity="sha256-5oWoeT1q+wsMWt1kUpOLN2ljxEAJJlBR9j+DhAUfa+8=" crossorigin="anonymous"></script>
<script>
    var scroll = new SmoothScroll('a[href*="#"]', {
        speed: 350,
        speedAsDuration: true,
        header: '.floating-header'
    });
    window.onload = function () {
        let menuButton = document.querySelector(".menu-toggle");
        document.querySelector(".menu-toggle-button").addEventListener("click", function (event) {
            if (!menuButton.classList.contains("menu-toggle-active")) {
                menuButton.classList.add("menu-toggle-active");
            } else {
                menuButton.classList.remove("menu-toggle-active");
            }
        });

        let tocSimple = document.querySelector('.post-content').querySelectorAll("h2, h3, h4");
        tocMenuList = document.querySelector(".toc-menu-list");
        Array.prototype.forEach.call(tocSimple, function (heading) {
            let newEntry = document.createElement("li");
            newEntry.setAttribute("class", "toc-list toc-level-" + heading.tagName.toLowerCase());

            let newLink = document.createElement("a");
            newLink.setAttribute("id", heading.id);
            newLink.setAttribute("href", "#" + heading.id);
            newLink.innerHTML = heading.textContent.trim();
            newLink.onclick = function () {
                menuButton.classList.remove("menu-toggle-active");
            }

            newEntry.appendChild(newLink);
            tocMenuList.appendChild(newEntry);
        });
        document.querySelector(".toc-menu-background").addEventListener("click", function () {
            menuButton.classList.remove("menu-toggle-active");
        })
    };
</script>
